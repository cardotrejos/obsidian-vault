### Introduction to Phoenix and it's Architecture

- Webserver
- Routing system
- Pluggable
- Plug.Router
- Simple get request

- Investigate more about  `mix new --sup`

### Create a controller

- Keep them light
- Controller file
- Router definition
- Similarity to plug

### Creating a REST API

- Representational state transfer
- Architecture style for api applications
- GET/PUT/POST/DELETE

#### CRUD

- Create, Read, Update and Destroy
- Maps to HTTP methods for REST
- Works on one data type at a time

Common Rest Patterns

- GET /items <- all
- GET /items/1 <- one
- POST /items <- create
- PUT/PATCH /items/1 <- update
- DELETE /items/1 <- delete

#### Testing a REST API

- Testing is done with Plug
- Mimic an api request
- Test the results

#### Selective Fields & Inclusions

- Selective fields done with `fields`
- Inclusions with `include`

### REST vs GraphQL
- REST with CRUD give us object by object
- Can't specify keys easily on relations
- Specs change with different frameworks
- GraphQL gives us objects
- Specifying relations only with selective keys

## Intro to GraphQL 
- Mutations/Queries (Schema)
- Explicit fields
- Types can mimic the database
- Relations supported in spec
- Frontend can query what they need
- Frontend can batch queries together 
- Documentation is autogenerated
- UI Tool to test out our queries and read docs

Bonus of GraphQL
- Fragments for reuse
- Type checks from FE
- Lintable queries/mutations
- Autocomplete in GraphiQL

## GraphQL on Elixir/Phoenix

### Absinthe
- Library for GraphQL
- Well maintained
- Has an entire book
- Supplies GraphiQL Plug
### Flow
- Types
- Schema
- Resolvers
Quiz flow
- Query -> Resolver -> Display


### Best practices
- Keep your mutations and queries simple
- Don't update relation via mutations
- Specify different mutations for different things
- Keep resolvers clean and lightweight


## Phoenix Channels and GraphQL Subsciptions

#### Websockets
- Soft realtime
- Maintain a connection to server
- Capable of pushing/receiving

#### Channels

- Topics
- Join Multiple
- Topics get/send messages
- PubSub (Publish/Subscribe)
- Js/Java client
- Works horizontally

#### Presence
- Allows tracking online users
- Replicates across cluster




